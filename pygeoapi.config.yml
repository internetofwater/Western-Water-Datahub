server:
  bind:
    host: localhost # change to your hostname if running your own instance
    port: 5005
  url: ${PYGEOAPI_URL:-http://localhost:5005} #change to host URL  if running your own instance
  mimetype: application/json; charset=UTF-8
  encoding: utf-8
  gzip: true
  language: en-US
  cors: true
  pretty_print: true
  limits:
    default_items: 1825 # 5 Years
    max_items: 10950 # 30 Years
  map:
    url: https://tile.openstreetmap.org/{z}/{x}/{y}.png
    attribution: '<a href="https://www.openstreetmap.org/copyright">Â© OpenStreetMap contributors</a>'

logging:
  level: ${PYGEOAPI_LOGLEVEL:-ERROR}
  # logfile: /tmp/pygeoapi.log

metadata:
  identification:
    title: Western Water Datahub
    description: The Western Water Datahub is an implementation of OGC API - EDR supported by the United States Bureau of Reclamation.
    keywords:
      - usbr
      - wwdh
      - iow
    keywords_type: theme
    terms_of_service: https://opensource.org/license/MIT
    url: https://github.com/internetofwater/WWDH
  license:
    name: MIT License
    url: https://opensource.org/license/MIT
  provider:
    name: Internet of Water
    url: https://github.com/internetofwater/WWDH
  contact:
    address: 113 Brattle St
    city: Cambridge
    stateorprovince: Massachussetts
    postalcode: 02138
    country: USA
    email: bwebb@lincolninst.edu
    url: https://cgsearth.org
    role: pointOfContact
    name: Benjamin Webb

resources:
  rise-edr:
    type: collection
    title: USBR Reclamation Information Sharing Environment (RISE)
    description: contains data from reservoirs and associated projects from the USBR. This collection is a proxy of the RISE API into the OGC API EDR format.
    provider-name:
      - BOR
      - USBR
    keywords:
      - EDR
      - RISE
      - USBR
    templates:
      path: pygeoapi-deployment/templates/jsonld/rise-edr
    links:
      - type: application/html
        rel: canonical
        title: data source
        href: https://data.usbr.gov/
        hreflang: en-US
    extents:
      spatial:
        bbox: [-123.60518, 28.4667, -95.875, 48.8283]
        crs: http://www.opengis.net/def/crs/OGC/1.3/CRS84
    providers:
      - &default-edr
        type: edr
        name: rise.rise_edr.RiseEDRProvider
        data: https://data.usbr.gov/
        title_field: name
      - &default-feature
        type: feature
        name: rise.rise.RiseProvider
        data: https://data.usbr.gov/
        title_field: name

  snotel-edr:
    type: collection
    title: Snowpack Telemetry Network (SNOTEL)
    description: is an automated system of snowpack and related climate sensors primarily in mountainous regions in the Western United States which aims to collect data like snow water equivalent, accumulated precipitation, and air temperature. This is a proxy of the SNOTEL API into the OGC API EDR format.
    provider-name:
      - DOA
      - USDA
      - NRCS
    keywords:
      - EDR
      - SNOTEL
      - NRCS
      - USDA
    templates:
      path: pygeoapi-deployment/templates/jsonld/snotel
    links:
      - type: application/html
        rel: documentation
        title: documentation
        href: https://www.nrcs.usda.gov/wps/portal/wcc/home/aboutus/monitoringprograms/automatedsnowmonitoring/
        hreflang: en-us
      - type: application/html
        rel: canonical
        title: data source
        href: https://wcc.sc.egov.usda.gov/awdbrestapi/swagger-ui/index.html
        hreflang: en-us
    extents:
      spatial:
        bbox: [-164.92472, 32.92342, -103.78758, 70.28062]
        crs: http://www.opengis.net/def/crs/OGC/1.3/CRS84
    providers:
      - <<: *default-edr
        name: snotel.snotel_edr.SnotelEDRProvider
        data: https://wcc.sc.egov.usda.gov/
      - <<: *default-feature
        name: snotel.snotel.SnotelProvider
        data: https://wcc.sc.egov.usda.gov/

  awdb-forecasts-edr:
    type: collection
    title: Air and Water Database (AWDB) Forecasts
    description: provides predictions for climate and water supply conditions. This is a proxy of the AWDB API into the OGC API EDR format. This collection uses the same endpoint as SNOTEL but includes only forecasts
    provider-name:
      - DOA
      - USDA
      - NRCS
    keywords:
      - open data
    extents: &default-extent
      spatial:
        bbox: [-170, 15, -51, 72]
        crs: http://www.opengis.net/def/crs/OGC/1.3/CRS84
    providers:
      - type: edr
        name: awdb_forecasts.awdb_forecasts_edr.AwdbForecastsEDRProvider
        data: https://wcc.sc.egov.usda.gov/awdbRestApi/v3/api-docs
      - type: feature
        name: awdb_forecasts.awdb_forecasts.AwdbForecastsProvider
        data: https://wcc.sc.egov.usda.gov/awdbRestApi/v3/api-docs
        title_field: name
    links:
      - type: application/html
        rel: documentation
        title: Documentation
        href: https://www.nrcs.usda.gov/wps/portal/wcc/home/aboutUs/monitoringPrograms/automatedSnowMonitoring/
        hreflang: en-US
      - type: application/html
        rel: canonical
        title: Data source
        href: https://wcc.sc.egov.usda.gov/awdbRestApi/swagger-ui/index.html
        hreflang: en-US
    templates:
      path: pygeoapi-deployment/templates/jsonld/snotel

  snotel-huc06-means:
    type: collection
    title: Snotel Snow Water Equivalent Aggregated by HUC06
    description: provides snow water equivalent data from SNOTEL aggregated by HUC06 watershed. Each feature contains one average for the entire HUC06; these averages are relative to the 30 year average.
    provider-name:
      - DOA
      - USDA
      - NRCS
    keywords:
      - open data
      - snotel
    links:
      - type: application/html
        rel: documentation
        title: Documentation
        href: https://www.nrcs.usda.gov/wps/portal/wcc/home/aboutUs/monitoringPrograms/automatedSnowMonitoring/
        hreflang: en-US
      - type: application/html
        rel: canonical
        title: Data source
        href: https://wcc.sc.egov.usda.gov/awdbRestApi/swagger-ui/index.html
        hreflang: en-US
    extents: *default-extent
    providers:
      - type: feature
        name: snotel_means.snotel_means.SnotelMeansProvider
        data: https://wcc.sc.egov.usda.gov/awdbRestApi/v3/api-docs
        entity: Observation
        title_field: name

  usace-edr:
    type: collection
    title: US Army Corps of Engineers Access2Water API
    description: provides a subset of the USACE Corps Water Management System (CWMS) API specifically focused on water control management data. This is a proxy of the CWMS API into the OGC API EDR format.
    provider-name:
      - DOA
      - USACE
      - NRCS
    keywords:
      - open data
    templates:
      path: pygeoapi-deployment/templates/jsonld/usace-edr
    extents: *default-extent
    providers:
      - type: edr
        name: usace.usace_edr.USACEEDRProvider
        data: https://wcc.sc.egov.usda.gov/awdbRestApi/v3/api-docs
      - type: feature
        name: usace.usace.USACEProvider
        data: https://wcc.sc.egov.usda.gov/awdbRestApi/v3/api-docs
        entity: Observation
        title_field: name
    link:
      - type: application/html
        rel: canonical
        title: Data source
        href: https://cwms-data.usace.army.mil/cwms-data/swagger-ui.html
      - type: application/html
        rel: documentation
        title: Documentation
        href: https://water.usace.army.mil/

  noaa-qpf-day-1: &default-qpf
    type: collection
    title: NOAA Weather Prediction Center Quantitative Precipitation Forecast Day 1
    description: consists of layers that represent forecasted QPFs for 24 hours from now. Quantitative Precipitation Forecasts, or QPFs, depict the amount of liquid precipitation expected to fall in a defined period of time. In the case of snow or ice, QPF represents the amount of liquid that will be measured when the precipitation is melted. QPF 24 Hours Day 1 is for the 24 hour time period starting at the valid date/time.
    provider-name:
      - WPC
      - NOAA
    keywords: [NOAA, QPF]
    links:
      - type: application/html
        rel: canonical
        title: Canonical
        href: https://mapservices.weather.noaa.gov/vector/rest/services/precip/wpc_qpf/MapServer
    extents: *default-extent
    providers:
      - &default-feature-qpf
        type: feature
        name: ESRI
        data: https://mapservices.weather.noaa.gov/vector/rest/services/precip/wpc_qpf/MapServer/1
        id_field: objectid
        time_field: issue_time

  noaa-qpf-day-2:
    <<: *default-qpf
    title: NOAA Weather Prediction Center Quantitative Precipitation Forecast Day 2
    description: consists of layers that represent forecasted QPFs for 48 hours from now. Quantitative Precipitation Forecasts, or QPFs, depict the amount of liquid precipitation expected to fall in a defined period of time. In the case of snow or ice, QPF represents the amount of liquid that will be measured when the precipitation is melted. QPF 24 Hours Day 2 is for a 24 hours time period starting at the valid date/time for day 2 (which is 24 hours past day 1).
    providers:
      - <<: *default-feature-qpf
        data: https://mapservices.weather.noaa.gov/vector/rest/services/precip/wpc_qpf/MapServer/2

  noaa-qpf-day-3:
    <<: *default-qpf
    title: NOAA Weather Prediction Center Quantitative Precipitation Forecast Day 3
    description: consists of layers that represent forecasted QPFs for 72 hours from now. Quantitative Precipitation Forecasts, or QPFs, depict the amount of liquid precipitation expected to fall in a defined period of time. In the case of snow or ice, QPF represents the amount of liquid that will be measured when the precipitation is melted. QPF 24 Hours Day 3 is for a 24 hours time period starting at the valid date/time for day 3 (which is 48 hours past day 1).
    providers:
      - <<: *default-feature-qpf
        data: https://mapservices.weather.noaa.gov/vector/rest/services/precip/wpc_qpf/MapServer/3

  noaa-qpf-day-4-5:
    <<: *default-qpf
    title: NOAA Weather Prediction Center Quantitative Precipitation Forecast Day 4-5
    description: consists of layers that represent forecasted QPFs for 72 hours from now. Quantitative Precipitation Forecasts, or QPFs, depict the amount of liquid precipitation expected to fall in a defined period of time. In the case of snow or ice, QPF represents the amount of liquid that will be measured when the precipitation is melted. QPF 48 Hours Day 4-5 is for a 48 hour time period starting at valid date/time for days 4-5 (which is 72 hours past day 1).
    providers:
      - <<: *default-feature-qpf
        data: https://mapservices.weather.noaa.gov/vector/rest/services/precip/wpc_qpf/MapServer/4

  noaa-qpf-day-6-7:
    <<: *default-qpf
    title: NOAA Weather Prediction Center Quantitative Precipitation Forecast Day 6-7
    description: consists of layers that represent forecasted QPFs for 72 hours from now. Quantitative Precipitation Forecasts, or QPFs, depict the amount of liquid precipitation expected to fall in a defined period of time. In the case of snow or ice, QPF represents the amount of liquid that will be measured when the precipitation is melted. QPF 48 Hours Day 6-7 is for a 48 hour time period starting at valid date/time for days 6-7 (which is 120 hours past day 1).
    providers:
      - <<: *default-feature-qpf
        data: https://mapservices.weather.noaa.gov/vector/rest/services/precip/wpc_qpf/MapServer/5

  noaa-cqpf-6-hours:
    <<: *default-qpf
    title: NOAA Weather Prediction Center Cumulative Quantitative Precipitation Forecast 6 Hours
    description: consists of layers that represent forecasted cumulative QPF for 6 hours from now.
    providers:
      - <<: *default-feature-qpf
        data: https://mapservices.weather.noaa.gov/vector/rest/services/precip/wpc_qpf/MapServer/7

  noaa-cqpf-48-hours:
    <<: *default-qpf
    title: NOAA Weather Prediction Center Cumulative Quantitative Precipitation Forecast 48 Hours
    description: consists of layers that represent forecasted cumulative QPF for 48 hours from now.
    providers:
      - <<: *default-feature-qpf
        data: https://mapservices.weather.noaa.gov/vector/rest/services/precip/wpc_qpf/MapServer/8

  noaa-cqpf-72-hours:
    <<: *default-qpf
    title: NOAA Weather Prediction Center Cumulative Quantitative Precipitation Forecast 72 Hours
    description: consists of layers that represent forecasted cumulative QPF for 72 hours from now.
    providers:
      - <<: *default-feature-qpf
        data: https://mapservices.weather.noaa.gov/vector/rest/services/precip/wpc_qpf/MapServer/9

  noaa-cqpf-120-hours:
    <<: *default-qpf
    title: NOAA Weather Prediction Center Cumulative Quantitative Precipitation Forecast 120 Hours
    description: consists of layers that represent forecasted cumulative QPF for 120 hours from now.
    providers:
      - <<: *default-qpf
        data: https://mapservices.weather.noaa.gov/vector/rest/services/precip/wpc_qpf/MapServer/10

  noaa-cqpf-168-hours:
    <<: *default-qpf
    title: NOAA Weather Prediction Center Cumulative Quantitative Precipitation Forecast 168 Hours
    description: consists of layers that represent forecasted cumulative QPF for 168 hours from now.
    providers:
      - <<: *default-feature-qpf
        data: https://mapservices.weather.noaa.gov/vector/rest/services/precip/wpc_qpf/MapServer/11

  noaa-4-inch-snow:
    <<: *default-qpf
    title: NOAA Weather Prediction Center Probability of >4 inches of snow
    description: consists of layers which each represent the probability of at least 4 inches of snowfall within 24 hours from now in a given area.
    links:
      - type: application/html
        rel: canonical
        title: Canonical
        href: https://mapservices.weather.noaa.gov/vector/rest/services/precip/wpc_prob_winter_precip/MapServer
    providers:
      - <<: *default-feature-qpf
        data: https://mapservices.weather.noaa.gov/vector/rest/services/precip/wpc_prob_winter_precip/MapServer/1

  noaa-8-inch-snow:
    <<: *default-qpf
    title: NOAA Weather Prediction Center Probability of >8 inches of snow
    description: consists of layers which each represent the probability of at least 8 inches of snowfall within 24 hours from now in a given area.
    providers:
      - <<: *default-feature-qpf
        data: https://mapservices.weather.noaa.gov/vector/rest/services/precip/wpc_prob_winter_precip/MapServer/2

  noaa-12-inch-snow:
    <<: *default-qpf
    title: NOAA Weather Prediction Center Probability of >12 inches of snow
    description: consists of layers which each represent the probability of at least 12 inches of snowfall within 24 hours from now in a given area.
    providers:
      - <<: *default-feature-qpf
        data: https://mapservices.weather.noaa.gov/vector/rest/services/precip/wpc_prob_winter_precip/MapServer/3

  noaa-0.25-inch-icing:
    <<: *default-qpf
    title: NOAA Probability of >0.25 inches of icing
    description: consists of layers which each represent the probability of at least 0.25 inches of icing within 24 hours from now in a given area.
    providers:
      - <<: *default-feature-qpf
        data: https://mapservices.weather.noaa.gov/vector/rest/services/precip/wpc_prob_winter_precip/MapServer/4

  nohrsc-swe:
    type: collection
    title: NOAA National Operational Hydrologic Remote Sensing Center Snow Water Forecast
    description: contains forecasts for the water equivalent of snow across the US
    provider-name:
      - NOHRSC
      - NOAA
    keywords:
      - nohrsc
      - snow water equivalent
    links:
      - type: application/html
        rel: documentation
        title: Documentation
        href: https://www.nohrsc.noaa.gov/nsa/
      - type: application/html
        rel: canonical
        title: Canonical
        href: https://mapservices.weather.noaa.gov/raster/services/snow/NOHRSC_Snow_Analysis/MapServer/WMSServer
    extents:
      spatial:
        bbox: [-130.516667, 24.1, -62.25273100000001, 58.240301]
        crs: http://www.opengis.net/def/crs/EPSG/0/4269
    providers:
      - &default-wms
        type: map
        name: WMSFacade
        data: https://mapservices.weather.noaa.gov/raster/services/snow/NOHRSC_Snow_Analysis/MapServer/WMSServer
        options:
          layer: 1
          style: default
          projection: 4326
        format:
          name: png
          mimetype: image/png

  nohrsc-sd:
    type: collection
    title: NOAA National Operational Hydrologic Remote Sensing Center Snow Depth Forecast
    description: contains forecasts for the depth of snow across the US
    provider-name:
      - NOHRSC
      - NOAA
    keywords:
      - nohrsc
      - snow depth
    links:
      - type: application/html
        rel: canonical
        title: Canonical
        href: https://www.nohrsc.noaa.gov/nsa/
      - type: application/html
        rel: documentation
        title: Documentation
        href: https://www.weather.gov/gis/cloudgiswebservices
    extents: *default-extent
    providers:
      - <<: *default-wms
        data: https://mapservices.weather.noaa.gov/raster/services/snow/NOHRSC_Snow_Analysis/MapServer/WMSServer

  # nohrsd-saswb:
  #   <<: *default-qpf
  #   title: NOAA National Operational Hydrologic Remote Sensing Center Snow Analysis Water Boundary
  #   description:
  #   providers:
  #     - <<: *default-feature-qpf
  #       data: https://mapservices.weather.noaa.gov/raster/rest/services/snow/NOHRSC_Snow_Analysis/MapServer/5

  noaa-rfc:
    type: collection
    title: NOAA River Forecast Center Seasonal Forecasts
    description: aggregates water supply forecast data from all regional NOAA river forecast centers into one dataset.
    provider-name:
      - RFC
      - NOAA
    keywords: [NOAA]
    links:
      - type: application/html
        rel: documentation
        title: Documentation
        href: https://www.cbrfc.noaa.gov/wsup/graph/west/map/esp_map.html
    extents: *default-extent
    templates:
      path: pygeoapi-deployment/templates/jsonld/noaa_rfc
    providers:
      - type: feature
        name: noaa_rfc.noaa_rfc.NOAARFCProvider
        data: https://www.cbrfc.noaa.gov/wsup/graph/west/map/esp_map.html
        title_field: espname

  noaa-temp-6-10-day:
    type: collection
    title: NOAA Climate Prediction Center 6-10 Day Temperature Forecast
    description: consists of layers which each represent a forecasted temperature for 6-10 days from now. Forecasts are given as relative percentages and are represented as above, near, or below normal.
    provider-name:
      - CPC
      - NOAA
    keywords: [NOAA, temperature]
    links:
      - type: application/html
        rel: documentation
        title: Documentation
        href: https://www.cpc.ncep.noaa.gov/
      - type: application/html
        rel: canonical
        title: Data Source
        href: https://mapservices.weather.noaa.gov/vector/rest/services/outlooks/cpc_6_10_day_outlk/MapServer/0
    extents: *default-extent
    providers:
      - <<: *default-feature-qpf
        data: https://mapservices.weather.noaa.gov/vector/rest/services/outlooks/cpc_6_10_day_outlk/MapServer/0
        time_field: fcst_date
      - <<: *default-wms
        data: https://mapservices.weather.noaa.gov/vector/services/outlooks/cpc_6_10_day_outlk/MapServer/WMSServer

  noaa-precip-6-10-day:
    type: collection
    title: NOAA Climate Prediction Center 6-10 Day Precipitation Forecast
    description: consists of layers which each represent a forecasted chance for precipitation for 6-10 days from now. Forecasts are given as relative percentages and are represented as above, near, or below normal.
    provider-name:
      - CPC
      - NOAA
    keywords: [NOAA, temperature]
    links:
      - type: application/html
        rel: canonical
        title: Canonical
        href: https://mapservices.weather.noaa.gov/vector/rest/services/outlooks/cpc_6_10_day_outlk/MapServer/1
      - type: application/html
        rel: documentation
        title: Documentation
        href: https://www.cpc.ncep.noaa.gov/
    extents: *default-extent
    providers:
      - <<: *default-feature-qpf
        data: https://mapservices.weather.noaa.gov/vector/rest/services/outlooks/cpc_6_10_day_outlk/MapServer/1
        time_field: fcst_date
      - <<: *default-wms
        data: https://mapservices.weather.noaa.gov/vector/services/outlooks/cpc_6_10_day_outlk/MapServer/WMSServer
        options:
          layer: 0
          style: default
          projection: 4326

  us-current-drought-monitor:
    type: collection
    title: National Drought Mitigation Center Current Drought Monitor
    description: contains data on current drought conditions across the US. Each feature represents a category of drought intensity.
    provider-name:
      - NDMC
      - NOAA
      - DOA
      - USDA
    keywords: ["drought"]
    links:
      - type: application/html
        rel: documentation
        title: documentation
        href: https://services9.arcgis.com/RHVPKKiFTONKtxq3/arcgis/rest/services/US_Drought_Intensity_v1/FeatureServer/3
    extents: *default-extent
    providers:
      - <<: *default-feature-qpf
        data: https://services9.arcgis.com/RHVPKKiFTONKtxq3/arcgis/rest/services/US_Drought_Intensity_v1/FeatureServer/3
        id_field: OBJECTID
        time_field: ddate
      - <<: *default-wms
        data: https://ndmcgeodata.unl.edu/cgi-bin/mapserv.exe?map=/ms4w/apps/usdm/map/usdm_current_wms.map
        options:
          layer: usdm_current
          style: default
          projection: 4326

  us-historical-drought-monitor:
    type: collection
    title: National Drought Mitigation Center Historical Drought Monitor
    description: contains historical drought intensity data across the United States.
    provider-name:
      - NDMC
      - NOAA
      - DOA
      - USDA
    keywords: ["drought"]
    links:
      - type: application/html
        rel: documentation
        title: Documentation
        href: https://services9.arcgis.com/RHVPKKiFTONKtxq3/ArcGIS/rest/services/US_Drought_Intensity_v1/FeatureServer/2
    extents: *default-extent
    providers:
      - <<: *default-feature-qpf
        data: https://services9.arcgis.com/RHVPKKiFTONKtxq3/ArcGIS/rest/services/US_Drought_Intensity_v1/FeatureServer/2
        id_field: OBJECTID
        time_field: ddate
      - <<: *default-wms
        data: https://ndmcgeodata.unl.edu/cgi-bin/mapserv.exe?map=/ms4w/apps/usdm/map/usdm_current_wms.map
        options:
          layer: usdm_current
          style: default
          projection: 4326

  usgs-prism:
    type: collection
    title: Parameter-elevation Regressions on Independent Slopes Model (PRISM)
    description: provides a raster for high-resolution spatial climate data, including precipitation, temperature, and other climate variables, derived by combining point-based weather observations with digital elevation and other geographic information.
    hidden: True
    provider-name:
      - GS
      - USGS
      - OSU
    keywords:
      - temperature
      - precipitation
    extents: *default-extent
    links:
      - type: application/html
        rel: documentation
        title: Documentation
        href: https://cida.usgs.gov/thredds/catalog.html?dataset=cida.usgs.gov/prism_v2
      - type: application/html
        rel: canonical
        title: Data source
        href: https://usgs.osn.mghpcc.org/mdmf/gdp/PRISM_v2.zarr
    providers:
      - type: edr
        name: xarray-edr
        data: s3://mdmf/gdp/PRISM_v2.zarr
        format:
          name: zarr
          mimetype: application/zip
        options:
          s3:
            anon: true
            requester_pays: false
            client_kwargs:
              endpoint_url: https://usgs.osn.mghpcc.org/

  resviz-edr:
    type: collection
    title: USBR Reservoir Drought Conditions (resviz)
    description: contains current and average drought conditions for USBR reservoirs dervied from the USBR resviz endpoint
    hidden: True
    provider-name:
      - DERIVED
    keywords:
      - reservoir
      - drought
    extents:
      spatial:
        bbox: [-123.60518, 28.4667, -95.875, 48.8283]
        crs: http://www.opengis.net/def/crs/OGC/1.3/CRS84
    links:
      - type: application/html
        rel: canonical
        title: Canonical
        href: https://data.usbr.gov/rise/rise-resviz/data
    providers:
      - type: edr
        name: pgedr.PostgresEDRProvider
        data: &postgres-data
          host: ${POSTGRES_HOST:-localhost}
          dbname: ${POSTGRES_DB:-edr}
          user: ${POSTGRES_USER:-postgres}
          password: ${POSTGRES_PASSWORD:-password}
        table: resviz
        properties:
          - resviz_stations.monitoring_location_id
          - resviz_stations.max_capacity
          - resviz_stations.monitoring_location_name
          - resviz_stations.site_name
          - resviz_stations.doi_region_num
          - resviz_stations.doi_region_name
          - resviz_stations.huc06
          - resviz_stations.huc08
          - resviz_stations.state
        edr_fields:
          id_field: ogc_fid
          time_field: data_date
          location_field: resviz_stations.monitoring_location_id
          geom_field: resviz_stations.geom
          parameter_id: resviz_parameters.parameter_id
          parameter_name: resviz_parameters.parameter_name
          parameter_unit: resviz_parameters.parameter_unit
        external_tables:
          resviz_stations:
            foreign: monitoring_location_id
            remote: monitoring_location_id
          resviz_parameters:
            foreign: parameter_id
            remote: parameter_id
      - type: feature
        name: PostgreSQL
        data: *postgres-data
        table: resviz_stations
        id_field: monitoring_location_id
        geom_field: geom

  doi-regions:
    type: collection
    title: DOI Unified Interior Regional Boundaries
    description: contains the boundaries for each of the regions in the US Department of the Interior
    provider-name:
      - BOR
      - USBR
      - DOI
    keywords:
      - doi
      - boundaries
    extents: *default-extent
    links:
      - type: application/html
        title: Documentation
        rel: documentation
        href: https://www.doi.gov/employees/reorg/unified-regional-boundaries
    providers:
      - type: feature
        name: ESRI
        # data: https://services1.arcgis.com/fBc8EJBxQRMcHlei/arcgis/rest/services/DOI_Unified_Regions/FeatureServer/0

        # Very similar as the one above, yet it contains additional info like the regions' official abbreviation
        data: https://services1.arcgis.com/ixD30sld6F8MQ7V5/ArcGIS/rest/services/DOI_12_Unified_Regions_20180801/FeatureServer/0
        id_field: OBJECTID
        title_field: REG_NAME

  noaa-river-stage-forecast-day-1: &default-river-stage
    type: collection
    title: NOAA National Water Prediction Service River Stage Forecast Day 1
    description: contains forecasts for the stage of rivers across the US one day from now, including floods or low water thresholds.
    provider-name:
      - NOAA
      - RFC
    keywords: [NOAA, riv_gauges]
    links:
      - type: application/html
        rel: documentation
        title: Documentation
        href: https://mapservices.weather.noaa.gov/eventdriven/rest/services/water/riv_gauges/MapServer
      - type: application/html
        rel: canonical
        title: Data Source
        href: https://mapservices.weather.noaa.gov/eventdriven/rest/services/water/riv_gauges/MapServer
    extents: *default-extent
    providers:
      - &default-feature-river-stage
        type: feature
        name: ESRI
        data: https://mapservices.weather.noaa.gov/eventdriven/rest/services/water/riv_gauges/MapServer/1
        id_field: objectid
        time_field: fcsttime

  noaa-river-stage-forecast-day-2:
    <<: *default-river-stage
    title: NOAA National Water Prediction Service River Stage Forecast Day 2
    description: contains forecasts for the stage of rivers across the US 2 days from now, including floods or low water thresholds.
    providers:
      - <<: *default-feature-river-stage
        data: https://mapservices.weather.noaa.gov/eventdriven/rest/services/water/riv_gauges/MapServer/2

  noaa-river-stage-forecast-day-3:
    <<: *default-river-stage
    title: NOAA National Water Prediction Service River Stage Forecast Day 3
    description: contains forecasts for the stage of rivers across the US 3 days from now, including floods or low water thresholds.
    providers:
      - <<: *default-feature-river-stage
        data: https://mapservices.weather.noaa.gov/eventdriven/rest/services/water/riv_gauges/MapServer/3

  noaa-river-stage-forecast-day-10:
    <<: *default-river-stage
    title: NOAA National Water Prediction Service River Stage Forecast Day 10
    description: contains forecasts for the stage of rivers across the US 10 days from now, including floods or low water thresholds.
    providers:
      - <<: *default-feature-river-stage
        data: https://mapservices.weather.noaa.gov/eventdriven/rest/services/water/riv_gauges/MapServer/10

  resops-edr:
    type: collection
    title: ResOpsUS 30 Year Storage Info for USACE Reservoirs
    description: contains data on all reservoirs maintained by the US Army Corps of Engineers (USACE) present within the ResOpsUS dataset. Each feature includes the 30 year averages for storage levels on each day. This data is historical and spans until 2020. Each feature is identified according to the National Inventory of Dams (NID) ID.
    hidden: True
    provider-name:
      - DERIVED
    keywords:
      - EDR
      - ResOpsUS
      - USACE
    links:
      - type: link
        rel: canonical
        title: Data Source
        href: https://www.nature.com/articles/s41597-022-01134-7
    extents:
      spatial:
        bbox: [-164.92472, 32.92342, -103.78758, 70.28062]
        crs: http://www.opengis.net/def/crs/OGC/1.3/CRS84
    providers:
      - <<: *default-feature
        name: resops.resops.ResOpsUSProvider
        data: https://zenodo.org/records/5893641
      - <<: *default-edr
        data: https://zenodo.org/records/5893641
        name: resops.resops_edr.ResOpsUSProviderEDR
